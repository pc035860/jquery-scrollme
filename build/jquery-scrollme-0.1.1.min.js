/*! jquery-scrollme
version: 0.1.1
build date: 2013-05-08
author: Robin Fan
https://github.com/pc035860/jquery-scrollme.git */
(function(t){function n(){h||(h=!0,l(e))}function e(){var n=v.scrollTop();t.each(m,function(e,a){var l,m,h,d;d=i(n,a),d!==!1&&(d===u?(n=a.start,a.status=u):d===o?(n=a.end,a.status=o):a.status=c,l=n-a.start,m=l/(a.end-a.start),t.each(a.props,function(n,e){var i,u=e.start+(e.end-e.start)*e.easing(m);if(t.isNumeric(e.start)&&t.isNumeric(e.end))if("background-position-x"==e.name||"background-position-y"==e.name)f?a.element.css(e.name,u+e.unit):"background-position-x"==e.name?(i=a.element.css("background-position").split(/ /),a.element.css("background-position",u+e.unit+" "+i[1])):"background-position-y"==e.name&&(i=a.element.css("background-position").split(/ /),a.element.css("background-position",i[0]+" "+u+e.unit));else if(r(e.name)){h=h||[];var c=e.unit;"%"==c&&(c="px",u=s(e.name.substr(-1).toLowerCase(),u)),h.push(e.name+"("+u+c+")")}else a.element.css(e.name,u+e.unit);else a.status===o?a.element.css(e.name,e.end):a.element.css(e.name,e.start)}),h&&h.length>0&&a.element.css("transform",h.join(" ")))}),h=!1}function a(t){for(var n=-1,e=t.length;33>t.charCodeAt(--e);)for(;33>t.charCodeAt(++n););return t.slice(n,e+1)}function r(t){return!!p[t]}function s(t,n){switch(t){case"x":return v.width()*(n/100);case"y":return v.height()*(n/100)}}function i(t,n){return t>=n.start&&n.end>=t?c:n.start>t&&n.status!==u?u:t>n.end&&n.status!==o?o:!1}var u=1,o=2,c=3,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),m=[],f=function(){return document.createElement("div").style.backgroundPositionX!==void 0}(),h=!1,d=/smF(\d+)t(\d+)/,p={translateX:!0,translateY:!0,translateZ:!0,scaleX:!0,scaleY:!0,scale:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skewX:!0,skewY:!0},g={},v=t(window),k=null,w=0,b=!1;g.linear=function(t){return t},g.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},g.sineOut=function(t){return Math.sin(t*Math.PI/2)},g.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},g.getBackIn=function(t){return function(n){return n*n*((t+1)*n-t)}},g.getBackOut=function(t){return function(n){return--n*n*((t+1)*n+t)+1}},g.backOut=g.getBackOut(2),g.backIn=g.getBackIn(2),g.getElasticIn=function(t,n){var e=2*Math.PI;return function(a){if(0===a||1===a)return a;var r=n/e*Math.asin(1/t);return-(t*Math.pow(2,10*(a-=1))*Math.sin((a-r)*e/n))}},g.elasticIn=g.getElasticIn(1,.3),g.getElasticOut=function(t,n){var e=2*Math.PI;return function(a){if(0===a||1===a)return a;var r=n/e*Math.asin(1/t);return t*Math.pow(2,-10*a)*Math.sin((a-r)*e/n)+1}},g.elasticOut=g.getElasticOut(1,.3),t.fn.scrollme=function(){return t(this).each(function(){var n,e=t(this),r=e.data();t.each(r,function(r,s){var i=r.match(d);i&&(n={start:Number(i[1]),end:Number(i[2]),props:[],element:e,status:c},t.each(s.split(/,/),function(e,r){r=a(r);var s=[];t.each(r.split(/ /),function(t,n){var e=a(n);""!==e&&s.push(e)}),n.props.push({name:s[0],start:t.isNumeric(s[1])?Number(s[1]):s[1],end:t.isNumeric(s[2])?Number(s[2]):s[2],unit:s[3]||"",easing:s[4]&&g[s[4]]?g[s[4]]:g.linear})}),m.push(n))})}),m.length>0&&!b&&(b=!0,v.scroll(function(){n(),null!==k&&clearInterval(k),k=setInterval(function(){n(),w++>=3&&(w=0,clearInterval(k),k=null)},50)})),this}})(jQuery);